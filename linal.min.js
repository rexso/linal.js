var linal={VERSION:"0.1.2"};!function(){function definedNotNull(r){return void 0!==r&&null!==r}function isNumber(r){return"number"==typeof r&&!isNaN(r)}function isArray(r){return r instanceof Array||r instanceof Float32Array}function indexOutOfRange(r,t,i){return r+" index out of range: "+t+", expected "+i}function invalidAssignment(r,t,i){return"Invalid assigment of "+r+": "+t+" ("+typeof t+"), expected "+i}function invalidParameter(r,t,i,a){return"Invalid parameter '"+r+"' in "+a+": "+t+" ("+typeof t+"), expected "+i}function Vector2(r,t){Object.defineProperty(this,"array",{value:new Float32Array([0,0])}),["x","y"].forEach(function(r,t){Object.defineProperty(this,r,{get:function(){return this.array[t]},set:function(i){if(!isNumber(i))throw invalidAssignment("Vector2."+r,i,"number");this.array[t]=i}})},this),definedNotNull(r)&&this.assign(r,t)}function Vector3(r,t,i){Object.defineProperty(this,"array",{value:new Float32Array([0,0,0])}),["x","y","z"].forEach(function(r,t){Object.defineProperty(this,r,{get:function(){return this.array[t]},set:function(i){if(!isNumber(i))throw invalidAssignment("Vector3."+r,i,"number");this.array[t]=i}})},this),definedNotNull(r)&&this.assign(r,t,i)}function Vector4(r,t,i,a){Object.defineProperty(this,"array",{value:new Float32Array([0,0,0,0])}),["x","y","z","w"].forEach(function(r,t){Object.defineProperty(this,r,{get:function(){return this.array[t]},set:function(i){if(!isNumber(i))throw invalidAssignment("Vector4."+r,i,"number");this.array[t]=i}})},this),definedNotNull(r)&&this.assign(r,t,i,a)}function Matrix33(r){Object.defineProperty(this,"array",{value:new Float32Array([1,0,0,0,1,0,0,0,1])}),definedNotNull(r)&&this.assign(r)}function Matrix44(r){Object.defineProperty(this,"array",{value:new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}),definedNotNull(r)&&this.assign(r)}Vector2.prototype={add:function(r){if(r instanceof Vector2)this.x+=r.x,this.y+=r.y;else{if(!isNumber(r))throw invalidParameter("value",r,"number or Vector2","Vector2.add");this.x+=r,this.y+=r}return this},assign:function(r,t){if(r instanceof Vector2)return this.assign(r.x,r.y);if(isNumber(r)&&!definedNotNull(t))return this.assign(r,r);var i=["x","y"],a=r;return[a,t].forEach(function(r,t){if(!isNumber(r))throw invalidParameter(i[t],r,"number","Vector2.assign")}),this.x=a,this.y=t,this},get copy(){return new Vector2(this)},distance:function(r){if(r instanceof Vector2){var t=this.x-r.x,i=this.y-r.y;return Math.sqrt(t*t+i*i)}throw invalidParameter("vec2",r,"Vector2","Vector2.distance")},divide:function(r){if(r instanceof Vector2)this.x/=r.x,this.y/=r.y;else{if(!isNumber(r))throw invalidParameter("value",r,"number or Vector2","Vector2.divide");this.x/=r,this.y/=r}return this},dot:function(r){if(r instanceof Vector2)return this.x*r.x+this.y*r.y;throw invalidParameter("vec2",r,"Vector2","Vector2.dot")},get length(){return Math.sqrt(this.x*this.x+this.y*this.y)},maximize:function(r){if(!(r instanceof Vector2))throw invalidParameter("vec2",r,"Vector2","Vector2.max");return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this},minimize:function(r){if(!(r instanceof Vector2))throw invalidParameter("vec2",r,"Vector2","Vector2.min");return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this},multiply:function(r){if(r instanceof Vector2)this.x*=r.x,this.y*=r.y;else{if(!isNumber(r))throw invalidParameter("value",r,"number or Vector2","Vector2.multiply");this.x*=r,this.y*=r}return this},normalize:function(){var r=1/this.length;return this.x*=r,this.y*=r,this},get normalized(){return this.copy.normalize()},rotate:function(r){if(!isNumber(r))throw invalidParameter("radians",r,"number","Vector2.rotate");var t=Math.cos(r),i=Math.sin(r),a=this.x*t-this.y*i,s=this.x*i+this.y*t;return this.x=a,this.y=s,this},subtract:function(r){if(r instanceof Vector2)this.x-=r.x,this.y-=r.y;else{if(!isNumber(r))throw invalidParameter("value",r,"number or Vector2","Vector2.subtract");this.x-=r,this.y-=r}return this},swap:function(r){if(!(r instanceof Vector2))throw invalidParameter("vec2",r,"Vector2","Vector2.swap");this.x=r.x+(r.x=this.x,0),this.y=r.y+(r.y=this.y,0)},toString:function(){return"("+this.x+", "+this.y+")"}},Vector3.prototype={add:function(r){if(r instanceof Vector3)this.x+=r.x,this.y+=r.y,this.z+=r.z;else{if(!isNumber(r))throw invalidParameter("value",r,"number or Vector3","Vector3.add");this.x+=r,this.y+=r,this.z+=r}return this},angle:function(r){if(r instanceof Vector3)return Math.acos(this.dot(r)/(this.length*r.length));throw invalidParameter("vec3",r,"Vector3","Vector3.angle")},assign:function(r,t,i){if(r instanceof Vector3)return this.assign(r.x,r.y,r.z);if(r instanceof Vector2)return this.assign(r.x,r.y,isNumber(t)?t:0);if(isNumber(r)&&!definedNotNull(t)&&!definedNotNull(i))return this.assign(r,r,r);var a=["x","y","z"],s=r;return[s,t,i].forEach(function(r,t){if(!isNumber(r))throw invalidParameter(a[t],r,"number","Vector3.assign")}),this.x=s,this.y=t,this.z=i,this},get copy(){return new Vector3(this)},cross:function(r){if(r instanceof Vector3)return new Vector3(this.y*r.z-this.z*r.y,this.z*r.x-this.x*r.z,this.x*r.y-this.y*r.x);throw invalidParameter("vec3",r,"Vector3","Vector3.cross")},distance:function(r){if(r instanceof Vector3){var t=this.x-r.x,i=this.y-r.y,a=this.z-r.z;return Math.sqrt(t*t+i*i+a*a)}throw invalidParameter("vec3",r,"Vector3","Vector3.distance")},divide:function(r){if(r instanceof Vector3)this.x/=r.x,this.y/=r.y,this.z/=r.z;else if(isNumber(r))this.x/=r,this.y/=r,this.z/=r;else if(r instanceof Matrix33)this.assign(this.x/r.array[0]+this.y/r.array[3]+this.z/r.array[6],this.x/r.array[1]+this.y/r.array[4]+this.z/r.array[7],this.x/r.array[2]+this.y/r.array[5]+this.z/r.array[8]);else{if(!(r instanceof Matrix44))throw invalidParameter("value",r,"number, Vector3, Matrix33 or Matrix44","Vector3.divide");this.assign(this.x/r.array[0]+this.y/r.array[4]+this.z/r.array[8]+r.array[12],this.x/r.array[1]+this.y/r.array[5]+this.z/r.array[9]+r.array[13],this.x/r.array[2]+this.y/r.array[6]+this.z/r.array[10]+r.array[14])}return this},dot:function(r){if(r instanceof Vector3)return this.x*r.x+this.y*r.y+this.z*r.z;throw invalidParameter("vec3",r,"Vector3","Vector3.dot")},get length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},maximize:function(r){if(!(r instanceof Vector3))throw invalidParameter("vec3",r,"Vector3","Vector3.max");return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this},minimize:function(r){if(!(r instanceof Vector3))throw invalidParameter("vec3",r,"Vector3","Vector3.min");return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this},multiply:function(r){if(r instanceof Vector3)this.x*=r.x,this.y*=r.y,this.z*=r.z;else if(isNumber(r))this.x*=r,this.y*=r,this.z*=r;else if(r instanceof Matrix33)this.assign(this.x*r.array[0]+this.y*r.array[3]+this.z*r.array[6],this.x*r.array[1]+this.y*r.array[4]+this.z*r.array[7],this.x*r.array[2]+this.y*r.array[5]+this.z*r.array[8]);else{if(!(r instanceof Matrix44))throw invalidParameter("value",r,"number, Vector3, Matrix33 or Matrix44","Vector3.multiply");this.assign(this.x*r.array[0]+this.y*r.array[4]+this.z*r.array[8]+r.array[12],this.x*r.array[1]+this.y*r.array[5]+this.z*r.array[9]+r.array[13],this.x*r.array[2]+this.y*r.array[6]+this.z*r.array[10]+r.array[14])}return this},normalize:function(){var r=1/this.length;return this.x*=r,this.y*=r,this.z*=r,this},get normalized(){return this.copy.normalize()},rotateX:function(r){if(!isNumber(r))throw invalidParameter("radians",r,"number","Vector3.rotateX");var t=Math.cos(r),i=Math.sin(r),a=this.y*t-this.z*i,s=this.y*i+this.z*t;return this.y=a,this.z=s,this},rotateY:function(r){if(!isNumber(r))throw invalidParameter("radians",r,"number","Vector3.rotateY");var t=Math.cos(r),i=Math.sin(r),a=this.x*t-this.z*i,s=this.x*i+this.z*t;return this.x=a,this.z=s,this},rotateZ:function(r){if(!isNumber(r))throw invalidParameter("radians",r,"number","Vector3.rotateZ");var t=Math.cos(r),i=Math.sin(r),a=this.x*t-this.y*i,s=this.x*i+this.y*t;return this.x=a,this.y=s,this},subtract:function(r){if(r instanceof Vector3)this.x-=r.x,this.y-=r.y,this.z-=r.z;else{if(!isNumber(r))throw invalidParameter("value",r,"number or Vector3","Vector3.subtract");this.x-=r,this.y-=r,this.z-=r}return this},swap:function(r){if(!(r instanceof Vector3))throw invalidParameter("vec3",r,"Vector3","Vector3.swap");this.x=r.x+(r.x=this.x,0),this.y=r.y+(r.y=this.y,0),this.z=r.z+(r.z=this.z,0)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},get xy(){return new Vector2(this.x,this.y)},get xz(){return new Vector2(this.x,this.z)},get yz(){return new Vector2(this.y,this.z)}},Vector4.prototype={add:function(r){if(r instanceof Vector4)this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w;else{if(!isNumber(r))throw invalidParameter("value",r,"number or Vector4","Vector4.add");this.x+=r,this.y+=r,this.z+=r,this.w+=r}return this},assign:function(r,t,i,a){if(r instanceof Vector4)return this.assign(r.x,r.y,r.z,r.w);if(r instanceof Vector3)return this.assign(r.x,r.y,r.z,isNumber(t)?t:1);if(r instanceof Vector2)return this.assign(r.x,r.y,isNumber(t)?t:0,isNumber(i)?i:1);if(isNumber(r)&&!definedNotNull(t)&&!definedNotNull(i)&&!definedNotNull(a))return this.assign(r,r,r,r);var s=["x","y","z","w"],e=r;return[e,t,i,a].forEach(function(r,t){if(!isNumber(r))throw invalidParameter(s[t],r,"number","Vector4.assign")}),this.x=e,this.y=t,this.z=i,this.w=a,this},get copy(){return new Vector4(this)},divide:function(r){if(r instanceof Vector4)this.x/=r.x,this.y/=r.y,this.z/=r.z,this.w/=r.w;else if(isNumber(r))this.x/=r,this.y/=r,this.z/=r,this.w/=r;else{if(!(r instanceof Matrix44))throw invalidParameter("value",r,"number, Vector4 or Matrix44","Vector4.divide");this.assign(this.x/r.array[0]+this.y/r.array[4]+this.z/r.array[8]+this.w/r.array[12],this.x/r.array[1]+this.y/r.array[5]+this.z/r.array[9]+this.w/r.array[13],this.x/r.array[2]+this.y/r.array[6]+this.z/r.array[10]+this.w/r.array[14],this.x/r.array[3]+this.y/r.array[7]+this.z/r.array[11]+this.w/r.array[15])}return this},dot:function(r){if(r instanceof Vector4)return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w;throw invalidParameter("vec4",r,"Vector4","Vector4.dot")},get length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},maximize:function(r){if(!(r instanceof Vector4))throw invalidParameter("vec4",r,"Vector4","Vector4.minimize");return this.x=Math.max(this.x,r.x),this.y=Math.max(this.y,r.y),this.z=Math.max(this.z,r.z),this.w=Math.max(this.w,r.w),this},minimize:function(r){if(!(r instanceof Vector4))throw invalidParameter("vec4",r,"Vector4","Vector4.minimize");return this.x=Math.min(this.x,r.x),this.y=Math.min(this.y,r.y),this.z=Math.min(this.z,r.z),this.w=Math.min(this.w,r.w),this},multiply:function(r){if(r instanceof Vector4)this.x*=r.x,this.y*=r.y,this.z*=r.z,this.w*=r.w;else if(isNumber(r))this.x*=r,this.y*=r,this.z*=r,this.w*=r;else{if(!(r instanceof Matrix44))throw invalidParameter("value",r,"number, Vector4 or Matrix44","Vector4.multiply");this.assign(this.x*r.array[0]+this.y*r.array[4]+this.z*r.array[8]+this.w*r.array[12],this.x*r.array[1]+this.y*r.array[5]+this.z*r.array[9]+this.w*r.array[13],this.x*r.array[2]+this.y*r.array[6]+this.z*r.array[10]+this.w*r.array[14],this.x*r.array[3]+this.y*r.array[7]+this.z*r.array[11]+this.w*r.array[15])}return this},normalize:function(){var r=1/this.length;return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},get normalized(){return this.copy.normalize()},subtract:function(r){if(r instanceof Vector4)this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w;else{if(!isNumber(r))throw invalidParameter("value",r,"number or Vector4","Vector4.subtract");this.x-=r,this.y-=r,this.z-=r,this.w-=r}return this},swap:function(r){if(!(r instanceof Vector4))throw invalidParameter("vec4",r,"Vector4","Vector4.swap");this.x=r.x+(r.x=this.x,0),this.y=r.y+(r.y=this.y,0),this.z=r.z+(r.z=this.z,0),this.w=r.w+(r.w=this.w,0)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},get xy(){return new Vector2(this.x,this.y)},get xyz(){return new Vector3(this.x,this.y,this.z)},get xyw(){return new Vector3(this.x,this.y,this.w)},get xz(){return new Vector2(this.x,this.z)},get xzw(){return new Vector3(this.x,this.z,this.w)},get xw(){return new Vector2(this.x,this.w)},get yz(){return new Vector2(this.y,this.z)},get yzw(){return new Vector3(this.y,this.z,this.w)},get yw(){return new Vector2(this.y,this.w)},get zw(){return new Vector2(this.z,this.w)}},Matrix33.prototype={assign:function(r){var t,i,a;if(r instanceof Matrix33)for(a in r.array)this.array[a]=r.array[a];else if(r instanceof Matrix44)for(i=0;3>i;++i)for(t=0;3>t;++t)this.array[3*i+t]=r.array[4*i+t];else if(isArray(r)&&9==r.length)for(a in r)this.array[a]=r[a];else{if(!isNumber(r))throw invalidParameter("value",r,"number, Matrix33, Matrix44 or array[9]","Matrix33.assign");for(a in this.array)this.array[a]=r}return this},assignIdentity:function(){for(var r=0;9>r;++r)this.array[r]=r%4?0:1},get copy(){return new Matrix33(this)},get determinant(){return this.array[0]*(this.array[4]*this.array[8]-this.array[5]*this.array[7])-this.array[1]*(this.array[3]*this.array[8]-this.array[5]*this.array[6])+this.array[2]*(this.array[3]*this.array[7]-this.array[4]*this.array[6])},element:function(r,t){if(isNumber(t)&&isNumber(r)){if(t>=0&&3>=t&&r>=0&&3>=r)return this.array[3*r+t]}else if(isNumber(r)&&9>r)return this.array[r];throw indexOutOfRange("Matrix33.element",Number(r)+Number(t),"0-9")},get inverse(){var r=this.copy;return r.invert()?r:void console.warn("Inverse Matrix33 does not exist: "+r.toString())},invert:function(){var r,t=new Float32Array([this.array[4]*this.array[8]-this.array[5]*this.array[7],this.array[2]*this.array[7]-this.array[1]*this.array[8],this.array[1]*this.array[5]-this.array[2]*this.array[4],this.array[5]*this.array[6]-this.array[3]*this.array[8],this.array[0]*this.array[8]-this.array[2]*this.array[6],this.array[2]*this.array[3]-this.array[0]*this.array[5],this.array[3]*this.array[7]-this.array[4]*this.array[6],this.array[1]*this.array[6]-this.array[0]*this.array[7],this.array[0]*this.array[4]-this.array[1]*this.array[3]]),i=this.array[0]*t[0]+this.array[1]*t[3]+this.array[2]*t[6];if(Math.abs(i)<1e-4)return!1;i=1/i;for(r in t)this.array[r]=t[r]*i;return!0},multiply:function(r){var t,i,a,s;if(r instanceof Matrix33)for(s=new Float32Array(this.array),t=0;3>t;++t)for(i=0;3>i;++i)this.array[3*t+i]=s[3*t+0]*r.array[0+i]+s[3*t+1]*r.array[3+i]+s[3*t+2]*r.array[6+i];else{if(r instanceof Matrix44)return this.multiply(new Matrix33(r));if(!isNumber(r))throw invalidParameter("value",r,"number, Matrix33 or Matrix44","Matrix33.multiply");for(a in this.array)this.array[a]*=r}return this},toString:function(){return"[["+this.array[0].toPrecision(5)+", "+this.array[1].toPrecision(5)+", "+this.array[2].toPrecision(5)+"], ["+this.array[3].toPrecision(5)+", "+this.array[4].toPrecision(5)+", "+this.array[5].toPrecision(5)+"], ["+this.array[6].toPrecision(5)+", "+this.array[7].toPrecision(5)+", "+this.array[8].toPrecision(5)+"]]"},transpose:function(){var r;return r=this.array[1],this.array[1]=this.array[3],this.array[3]=r,r=this.array[2],this.array[2]=this.array[6],this.array[6]=r,r=this.array[5],this.array[5]=this.array[7],this.array[7]=r,this},get transposed(){return this.copy.transpose()}},Matrix44.prototype={assign:function(r){var t,i,a;if(r instanceof Matrix33){for(i=0;3>i;++i)for(t=0;3>t;++t)this.array[4*i+t]=r.array[3*i+t];this.array[3]=this.array[7]=this.array[11]=0,this.array[12]=this.array[13]=this.array[14]=0,this.array[16]=1}else if(r instanceof Matrix44)for(a in r.array)this.array[a]=r.array[a];else if(isArray(r)&&16==r.length)for(a in r)this.array[a]=r[a];else{if(!isNumber(r))throw invalidParameter("value",r,"number, Matrix33, Matrix44 or array[16]","Matrix44.assign");for(a in this.array)this.array[a]=r}return this},assignIdentity:function(){for(var r=0;16>r;++r)this.array[r]=r%5?0:1},get copy(){return new Matrix44(this)},get determinant(){var r=this.array[0]*this.array[5]-this.array[1]*this.array[4],t=this.array[0]*this.array[6]-this.array[2]*this.array[4],i=this.array[0]*this.array[7]-this.array[3]*this.array[4],a=this.array[1]*this.array[6]-this.array[2]*this.array[5],s=this.array[1]*this.array[7]-this.array[3]*this.array[5],e=this.array[2]*this.array[7]-this.array[3]*this.array[6],h=this.array[8]*this.array[13]-this.array[9]*this.array[12],n=this.array[8]*this.array[14]-this.array[10]*this.array[12],y=this.array[8]*this.array[15]-this.array[11]*this.array[12],o=this.array[9]*this.array[14]-this.array[10]*this.array[13],c=this.array[9]*this.array[15]-this.array[11]*this.array[13],u=this.array[10]*this.array[15]-this.array[11]*this.array[14];return r*u-t*c+i*o+a*y-s*n+e*h},element:function(r,t){if(isNumber(t)&&isNumber(r)){if(t>=0&&4>=t&&r>=0&&4>=r)return this.array[4*r+t]}else if(isNumber(r)&&16>r)return this.array[r];throw indexOutOfRange("Matrix44.element",Number(r)+Number(t),"0-16")},frustum:function(r,t,i,a,s,e){var h,n,y,o="left,right,bottom,top,near,far".split(",");return[r,t,i,a,s,e].forEach(function(r,t){if(!isNumber(r))throw invalidParameter(o[t],r,"number","Matrix44.frustum")}),0>=s||0>=e||(h=t-r)<=0||(n=a-i)<=0||(y=e-s)<=0?!1:(this.assign(new Matrix44([2*s/h,0,0,0,0,2*s/n,0,0,(t+r)/h,(a+i)/n,-(s+e)/y,-1,0,0,-2*s*e/y,0]).multiply(this)),!0)},get inverse(){var r=this.copy;return r.invert()?r:void console.warn("Inverse Matrix44 does not exist: "+r.toString())},invert:function(){var r,t,i=this.array[0]*this.array[5]-this.array[1]*this.array[4],a=this.array[0]*this.array[6]-this.array[2]*this.array[4],s=this.array[0]*this.array[7]-this.array[3]*this.array[4],e=this.array[1]*this.array[6]-this.array[2]*this.array[5],h=this.array[1]*this.array[7]-this.array[3]*this.array[5],n=this.array[2]*this.array[7]-this.array[3]*this.array[6],y=this.array[8]*this.array[13]-this.array[9]*this.array[12],o=this.array[8]*this.array[14]-this.array[10]*this.array[12],c=this.array[8]*this.array[15]-this.array[11]*this.array[12],u=this.array[9]*this.array[14]-this.array[10]*this.array[13],f=this.array[9]*this.array[15]-this.array[11]*this.array[13],x=this.array[10]*this.array[15]-this.array[11]*this.array[14],l=i*x-a*f+s*u+e*c-h*o+n*y;if(Math.abs(l)<1e-4)return!1;r=new Float32Array([this.array[5]*x-this.array[6]*f+this.array[7]*u,-this.array[1]*x+this.array[2]*f-this.array[3]*u,this.array[13]*n-this.array[14]*h+this.array[15]*e,-this.array[9]*n+this.array[10]*h-this.array[11]*e,-this.array[4]*x+this.array[6]*c-this.array[7]*o,this.array[0]*x-this.array[2]*c+this.array[3]*o,-this.array[12]*n+this.array[14]*s-this.array[15]*a,this.array[8]*n-this.array[10]*s+this.array[11]*a,this.array[4]*f-this.array[5]*c+this.array[7]*y,-this.array[0]*f+this.array[1]*c-this.array[3]*y,this.array[12]*h-this.array[13]*s+this.array[15]*i,-this.array[8]*h+this.array[9]*s-this.array[11]*i,-this.array[4]*u+this.array[5]*o-this.array[6]*y,this.array[0]*u-this.array[1]*o+this.array[2]*y,-this.array[12]*e+this.array[13]*a-this.array[14]*i,this.array[8]*e-this.array[9]*a+this.array[10]*i]),l=1/l;for(t in r)this.array[t]=r[t]*l;return!0},multiply:function(r){var t,i,a,s;if(r instanceof Matrix44)for(s=new Float32Array(this.array),t=0;4>t;++t)for(i=0;4>i;++i)this.array[4*t+i]=s[4*t+0]*r.array[0+i]+s[4*t+1]*r.array[4+i]+s[4*t+2]*r.array[8+i]+s[4*t+3]*r.array[12+i];else{if(r instanceof Matrix33)return this.multiply(new Matrix44(r));if(!isNumber(r))throw invalidParameter("value",r,"number, Matrix33 or Matrix44","Matrix44.multiply");for(a in this.array)this.array[a]*=r}return this},ortho:function(r,t,i,a,s,e){var h="left,right,bottom,top,near,far".split(",");return[r,t,i,a,s,e].forEach(function(r,t){if(!isNumber(r))throw invalidParameter(h[t],r,"number","Matrix44.ortho")}),(dX=t-r)&&(dY=a-i)&&(dZ=e-s)?(this.assign(new Matrix44([2/dX,0,0,0,0,2/dY,0,0,0,0,-2/dZ,0,-(t+r)/dX,-(a+i)/dY,-(s+e)/dZ,1]).multiply(this)),!0):!1},perspective:function(r,t,i,a){var s,e,h="verticalViewAngle,aspectRatio,near,far".split(","),n=new Matrix44;return[r,t,i,a].forEach(function(r,t){if(!isNumber(r))throw invalidParameter(h[t],r,"number","Matrix44.perspective")}),0>=i||0>=a?!1:(s=Math.tan(r/360*Math.PI)*i,e=s*t,n.frustum(-e,e,-s,s,i,a)?(this.assign(n.multiply(this)),!0):!1)},rotate:function(r,t,i,a){if(!isNumber(r))throw invalidParameter("radians",r,"number","Matrix44.rotate");if(t instanceof Vector3)return this.rotate(r,t.x,t.y,t.z);var s,e,h,n,y=["x","y","z"],o=t;return[o,i,a].forEach(function(r,t){if("number"!=typeof r)throw invalidParameter(y[t],r,"number","Matrix44.rotate")}),n=1-(s=Math.cos(r)),e=Math.sin(r),isNaN(h=Math.sqrt(o*o+i*i+a*a))||(o/=h,i/=h,a/=h,this.assign(new Matrix44([n*o*o+s,n*o*i-a*e,n*o*a+i*e,0,n*i*o+a*e,n*i*i+s,n*i*a-o*e,0,n*a*o-i*e,n*a*i+o*e,n*a*a+s,0,0,0,0,1]).multiply(this))),this},scale:function(r,t,i){if(r instanceof Vector3)return this.scale(r.x,r.y,r.z);var a=["x","y","z"],s=r;return[s,t,i].forEach(function(r,t){if("number"!=typeof r)throw invalidParameter(a[t],r,"number","Matrix44.scale")}),this.array[0]*=s,this.array[4]*=t,this.array[8]*=i,this.array[1]*=s,this.array[5]*=t,this.array[9]*=i,this.array[2]*=s,this.array[6]*=t,this.array[10]*=i,this.array[3]*=s,this.array[7]*=t,this.array[11]*=i,this},toString:function(){return"[["+this.array[0].toPrecision(5)+", "+this.array[1].toPrecision(5)+", "+this.array[2].toPrecision(5)+", "+this.array[3].toPrecision(5)+"], ["+this.array[4].toPrecision(5)+", "+this.array[5].toPrecision(5)+", "+this.array[6].toPrecision(5)+", "+this.array[7].toPrecision(5)+"], ["+this.array[8].toPrecision(5)+", "+this.array[9].toPrecision(5)+", "+this.array[10].toPrecision(5)+", "+this.array[11].toPrecision(5)+"], ["+this.array[12].toPrecision(5)+", "+this.array[13].toPrecision(5)+", "+this.array[14].toPrecision(5)+", "+this.array[15].toPrecision(5)+"]]"},translate:function(r,t,i){if(r instanceof Vector3)return this.translate(r.x,r.y,r.z);var a=["x","y","z"],s=r;return[s,t,i].forEach(function(r,t){if("number"!=typeof r)throw invalidParameter(a[t],r,"number","Matrix44.translate")}),this.array[12]+=this.array[0]*s+this.array[4]*t+this.array[8]*i,this.array[13]+=this.array[1]*s+this.array[5]*t+this.array[9]*i,this.array[14]+=this.array[2]*s+this.array[6]*t+this.array[10]*i,this.array[15]+=this.array[3]*s+this.array[7]*t+this.array[11]*i,this},get translation(){return new Vector3(this.array[12],this.array[13],this.array[14])},transpose:function(){var r;return r=this.array[1],this.array[1]=this.array[4],this.array[4]=r,r=this.array[2],this.array[2]=this.array[8],this.array[8]=r,r=this.array[3],this.array[3]=this.array[12],this.array[12]=r,r=this.array[6],this.array[6]=this.array[9],this.array[9]=r,r=this.array[7],this.array[7]=this.array[13],this.array[13]=r,r=this.array[11],this.array[11]=this.array[14],this.array[14]=r,this},get transposed(){return this.copy.transpose()}},linal.Vec2=Vector2,linal.Vec3=Vector3,linal.Vec4=Vector4,linal.Mat33=Matrix33,linal.Mat44=Matrix44}(),"object"==typeof module&&(module.exports=linal);